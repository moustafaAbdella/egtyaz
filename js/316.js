"use strict";(self.webpackChunklaravue=self.webpackChunklaravue||[]).push([[316],{140:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(6798),a=n.n(i)()(function(e){return e[1]});a.push([e.id,".tinymce-container[data-v-4b676504]{line-height:normal;position:relative}.tinymce-container[data-v-4b676504] .mce-fullscreen{z-index:10000}.tinymce-textarea[data-v-4b676504]{visibility:hidden;z-index:-1}.editor-custom-btn-container[data-v-4b676504]{position:absolute;right:4px;top:4px}.fullscreen .editor-custom-btn-container[data-v-4b676504]{position:fixed;z-index:10000}.editor-upload-btn[data-v-4b676504]{display:inline-block}",""]);const s=a},1538:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(5457);const a={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{apiUrl:i.A.apiUrl+"admin/upload?return=object",dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every(function(t){return e.listObj[t].hasSuccess})},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map(function(t){return e.listObj[t]});this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully or there is a network problem, please refresh the page and re-upload!")},handleSuccess:function(e,t){for(var n=t.uid,i=Object.keys(this.listObj),a=0,s=i.length;a<s;a++)if(this.listObj[i[a]].uid===n)return this.listObj[i[a]].url=e.files.file,void(this.listObj[i[a]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=Object.keys(this.listObj),i=0,a=n.length;i<a;i++)if(this.listObj[n[i]].uid===t)return void delete this.listObj[n[i]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Promise(function(a,s){var o=new Image;o.src=n.createObjectURL(e),o.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},a(!0)})}}};var s=n(5072),o=n.n(s),r=n(5514),l={insert:"head",singleton:!1};o()(r.A,l);r.A.locals;const c=(0,n(4486).A)(a,function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-container"},[t("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n    Upload Image\n  ")]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:e.apiUrl,"list-type":"picture-card"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Click here to upload")])],1),e._v(" "),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("Confirm")])],1)],1)},[],!1,null,"ca85efd8",null).exports},1783:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(1538),a=n(1795);const s=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],o={name:"Tinymce",components:{editorImage:i.A},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})},language:function(){var e=this;this.destroyTinymce(),this.$nextTick(function(){return e.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({language:this.language,selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:s,menubar:this.menubar,plugins:a.A,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],convert_urls:!1,default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",function(){e.hasChange=!0,e.$emit("input",n.getContent())})},setup:function(e){e.on("FullscreenStateChanged",function(e){t.fullscreen=e.state})}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach(function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))})}}};var r=n(5072),l=n.n(r),c=n(140),u={insert:"head",singleton:!1};l()(c.A,u);c.A.locals;const d=(0,n(4486).A)(o,function(){var e=this,t=e._self._c;return t("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:e.fullscreen}},[t("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),t("div",{staticClass:"editor-custom-btn-container"},[t("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},[],!1,null,"4b676504",null).exports},1795:(e,t,n)=>{n.d(t,{A:()=>i});const i=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount mathslate"]},3521:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(6798),a=n.n(i)()(function(e){return e[1]});a.push([e.id,".el-left{float:right}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;overflow:hidden;position:relative}.avatar-uploader .el-upload:hover{border-color:#409eff}.avatar-uploader-icon{color:#8c939d;font-size:28px;height:178px;line-height:178px;text-align:center;width:178px}.avatar{display:block;height:178px;width:178px}table .el-button+.el-button{margin-left:0!important}",""]);const s=a},5514:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(6798),a=n.n(i)()(function(e){return e[1]});a.push([e.id,".editor-slide-upload[data-v-ca85efd8]{margin-bottom:20px}.editor-slide-upload[data-v-ca85efd8] .el-upload--picture-card{width:100%}",""]);const s=a},6316:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(5457),a=n(1783),s=(n(7103),n(9884)),o=n(2215),r=n.n(o),l="Admin-Token";const c={directives:{permission:s.A},data:function(){return{tit:"Show Comments",id:0,comment:"",post_id:"",ip:"",status:"",postData:[],search:{s:"",status:"",visible:!1,order:"DESC",type:"",post_id:""},pagination:{},addNew:!1,apiUrl:i.A.apiUrl+"admin/upload",Front:i.A.frontend,listLoading:!1,setting:{},multipleSelection:[]}},components:{Tinymce:a.A},methods:{deleteSelection:function(){var e=this,t=this,n="";this.multipleSelection.forEach(function(e){n+=e.id+","}),this.$confirm("Do you realy want to delete selected items","Warning",{confirmButtonText:"Accept",cancelButtonText:"Cancel",type:"danger"}).then(function(){fetch(i.A.apiUrl+"admin/comment/"+n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r().get(l)}}).then(function(e){return e.json()}).then(function(e){0==e.res?t.$message.error("Unable to delete "):(t.$message.success("Deleted Succefully"),t.getList())})}).catch(function(){e.$message({type:"info",message:"Delete canceled"})})},handleSelectionChange:function(e){this.multipleSelection=e},UpdatePost:function(e){this.id=e.id,this.comment=e.comment,this.ip=e.ip,this.status=e.status.toString(),this.post_id=e.post_id,this.tit="Edit /  No: "+e.id+"  >>> "+e.name,this.addNew=!0},DeletePost:function(e){var t=this,n=this;this.$confirm("Do you want to delete ? ؟؟","Warning",{confirmButtonText:"Accept",cancelButtonText:"Cancel",type:"danger"}).then(function(){fetch(i.A.apiUrl+"admin/comment/"+e.id,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r().get(l)}}).then(function(e){return e.json()}).then(function(e){0==e.res?n.$message.error("Unable to delete"):(n.$message.success("Deleted Succefully"),n.getList())})}).catch(function(){t.$message({type:"info",message:"Delete Canceled"})})},ActivePost:function(e,t){var n=this,a=this;this.$confirm("Do you want to update Comment ؟","Warning",{confirmButtonText:"Accept",cancelButtonText:"Cancel",type:"warning"}).then(function(){fetch(i.A.apiUrl+"admin/comment/active/"+e.id,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r().get(l)},body:JSON.stringify({status:t})}).then(function(e){return e.json()}).then(function(e){0==e.res?a.$message.error("Unable to update status"):(a.$message.success("Updated Succefully"),a.getList())})}).catch(function(){n.$message({type:"info",message:"Update Canceled"})})},AddPost:function(){if(!this.comment||this.comment.length<3)this.$message.error("Please set comment");else{var e=this,t={id:this.id,comment:this.comment,status:this.status,post_id:this.post_id};fetch(i.A.apiUrl+"admin/comment",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r().get(l)},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){t.errors?e.$message.error(t.message):(e.$message.success("Updated"),e.getList(),e.id=0,e.ip="",e.status="",e.tit="",e.toggleAdd())})}},PostSearch:function(e){e?this.$message.info("Please wait"):(this.search.s="",this.search.status=""),this.getList(1,!0,!0),this.search.visible=!1},gotoPage:function(e){this.getList(e,!0,!1)},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this;a.listLoading=!0;var s=this.type;""!=this.search.type&&(s=this.search.type);var o=i.A.apiUrl+"admin/comment/?type="+s+"&page="+e+"&order="+a.search.order;t&&n&&(o=o+"&s="+a.search.s+"&status="+a.search.status),this.search.post_id&&(o=o+"&post_id="+this.search.post_id),fetch(o,{method:"get",headers:new Headers({Authorization:"Bearer "+r().get(l)})}).then(function(e){return e.json()}).then(function(e){a.postData=e.data,a.pagination.total=e.total,a.pagination.per_page=e.per_page,a.pagination.current_page=e.current_page,t&&n&&a.$message.success("We Founded "+e.total+" Result"),a.listLoading=!1})},toggleAdd:function(){var e=this;if(e.id=0,e.name="",e.comment="",e.email="",e.ip="",e.status="0",e.post_id=0,!1===this.addNew)return this.addNew=!0;this.addNew=!1},getPtype:function(){return this.$route.meta.type}},mounted:function(){this.$route.query.hasOwnProperty("post")&&(this.search.post_id=this.$route.query.post),this.getList(1)}};var u=n(5072),d=n.n(u),p=n(3521),m={insert:"head",singleton:!1};d()(p.A,m);p.A.locals;const h=(0,n(4486).A)(c,function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container",attrs:{id:"post"}},[t("el-container",[t("el-header",[t("h3",[e._v(" "+e._s(e.tit)+" ")]),e._v(" "),t("hr")]),e._v(" "),t("el-main",{attrs:{height:""}},[t("el-row",[t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.addNew,expression:"addNew"}],attrs:{xs:24,sm:24,lg:24}},[t("el-form",{attrs:{"label-position":"right","label-width":"150px"}},[t("el-row",[t("div",[t("el-col",{attrs:{span:22}},[t("el-form-item",{attrs:{label:"Comment"}},[t("el-input",{ref:"description",attrs:{type:"textarea",height:300},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:22}},[t("el-form-item",{attrs:{label:"Status"}},[t("el-select",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[t("el-option",{attrs:{value:"0",label:"Disabled"}}),e._v(" "),t("el-option",{attrs:{value:"1",label:"Enabled"}})],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:22}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.AddPost}},[e._v(" Save ")])],1)],1)],1)],1)],1),e._v(" "),0==e.addNew?t("el-col",{attrs:{span:24}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage comments"],expression:"['manage comments']"}],attrs:{type:"warning"},on:{click:function(t){e.search.visible=!0}}},[t("i",{staticClass:"el-icon-search"}),e._v(" البحث عن التعليقات")]),e._v(" "),e.multipleSelection.length>0?t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteSelection()}}},[e._v(" Delete Selected ")]):e._e(),e._v(" "),t("br"),e._v(" "),t("br"),e._v(" "),t("el-dialog",{attrs:{title:"Search Comments",visible:e.search.visible},on:{"update:visible":function(t){return e.$set(e.search,"visible",t)}}},[t("el-form",{attrs:{"label-position":"top",model:e.search}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Text"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.search.s,callback:function(t){e.$set(e.search,"s",t)},expression:"search.s"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Status"}},[t("el-select",{attrs:{placeholder:"Please Select Status"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},[t("el-option",{attrs:{label:"Enabled",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"Disabled",value:"1"}})],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Sort"}},[t("el-select",{attrs:{placeholder:"Select Sort Type"},model:{value:e.search.order,callback:function(t){e.$set(e.search,"order",t)},expression:"search.order"}},[t("el-option",{attrs:{label:"Older to New",value:"ASC"}}),e._v(" "),t("el-option",{attrs:{label:"New to older",value:"DESC"}})],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"Types"}},[t("el-select",{attrs:{placeholder:"Please Select"},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},[t("el-option",{attrs:{label:"All",value:""}}),e._v(" "),t("el-option",{attrs:{label:"Forum",value:"forum"}}),e._v(" "),t("el-option",{attrs:{label:"News",value:"news"}})],1)],1)],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.PostSearch(!1)}}},[e._v("Cancel")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.PostSearch(!0)}}},[e._v("Search")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.postData,"row-key":"id",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),t("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"Type"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",[n.row.post&&"news"==n.row.post.type?t("span",[e._v("News")]):t("span",[e._v("Forum")])])]}}],null,!1,2864155045)}),e._v(" "),t("el-table-column",{attrs:{label:"Forum Post"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.hasOwnProperty("post")&&n.row.post?t("div",[n.row.post&&"news"==n.row.post.type?t("a",{attrs:{href:e.news+"/"+n.row.post.key_id+".html"},domProps:{innerHTML:e._s(n.row.post.title)}}):t("a",{attrs:{href:e.Forum+"/"+n.row.post.key_id+".html"},domProps:{innerHTML:e._s(n.row.post.title)}})]):e._e()]}}],null,!1,1223188624)}),e._v(" "),t("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.hasOwnProperty("author")&&n.row.author?t("div",[t("p",[e._v(e._s(n.row.author.name))])]):e._e()]}}],null,!1,945392447)}),e._v(" "),t("el-table-column",{attrs:{label:"Email"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.hasOwnProperty("author")&&n.row.author?t("div",[t("p",[e._v(e._s(n.row.author.email))])]):e._e()]}}],null,!1,2329065140)}),e._v(" "),t("el-table-column",{attrs:{prop:"ip",label:"IP"}}),e._v(" "),t("el-table-column",{attrs:{prop:"comment",label:"Comment"}}),e._v(" "),t("el-table-column",{attrs:{prop:"created_at",label:"Created at"}}),e._v(" "),t("el-table-column",{attrs:{label:"Options"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{directives:[{name:"permissionx",rawName:"v-permissionx",value:["manage comments"],expression:"['manage comments']"}],attrs:{content:"Edit",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.UpdatePost(n.row)}}},[t("i",{staticClass:"el-icon-edit"})])],1),e._v(" "),1==n.row.status?t("el-tooltip",{directives:[{name:"permissionx",rawName:"v-permissionx",value:["manage comments"],expression:"['manage comments']"}],attrs:{content:"Disable",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.ActivePost(n.row,0)}}},[t("i",{staticClass:"el-icon-error"})])],1):0==n.row.status?t("el-tooltip",{directives:[{name:"permissionx",rawName:"v-permissionx",value:["manage comments"],expression:"['manage comments']"}],attrs:{content:"Active",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.ActivePost(n.row,1)}}},[t("i",{staticClass:"el-icon-success"})])],1):e._e(),e._v(" "),t("el-tooltip",{directives:[{name:"permissionx",rawName:"v-permissionx",value:["manage comments"],expression:"['manage comments']"}],attrs:{content:"Delete",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.DeletePost(n.row)}}},[t("i",{staticClass:"el-icon-delete"})])],1)]}}],null,!1,1062001012)})],1),e._v(" "),t("el-pagination",{attrs:{background:"",layout:"pager","page-size":e.pagination.per_page,total:e.pagination.total,"current-page":e.pagination.current_page,"hide-on-single-page":!0},on:{"current-change":e.gotoPage}})],1):e._e()],1)],1)],1)],1)},[],!1,null,null,null).exports},9884:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(6882);const a={inserted:function(e,t,n){var a=t.value,s=i.A.getters&&i.A.getters.permissions;if(!(a&&a instanceof Array&&a.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var o=a,r=s.some(function(e){return o.includes(e)});r||e.parentNode&&e.parentNode.removeChild(e)}};var s=function(e){e.directive("permission",a)};window.Vue&&(window.permission=a,Vue.use(s)),a.install=s;const o=a}}]);