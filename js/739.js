/*! For license information please see 739.js.LICENSE.txt */
"use strict";(self.webpackChunklaravue=self.webpackChunklaravue||[]).push([[739],{152:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6798),i=r.n(n)()(function(e){return e[1]});i.push([e.id,".app-container[data-v-1c865a73] .permission-alert{background-color:#f0f9eb;border-radius:4px;color:#67c23a;display:inline-block;margin-top:15px;padding:8px 16px;width:420px}.app-container[data-v-1c865a73] .permission-sourceCode{margin-left:15px}.app-container[data-v-1c865a73] .permission-tag{background-color:#ecf5ff}.app-container .description[data-v-1c865a73]{margin-bottom:15px}",""]);const o=i},390:(e,t,r)=>{r.d(t,{A:()=>c});function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function a(r,n,o,s){var a=n&&n.prototype instanceof c?n:c,u=Object.create(a.prototype);return i(u,"_invoke",function(r,n,i){var o,s,a,c=0,u=i||[],v=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return o=t,s=0,a=e,p.n=r,l}};function d(r,n){for(s=r,a=n,t=0;!v&&c&&!i&&t<u.length;t++){var i,o=u[t],d=p.p,m=o[2];r>3?(i=m===n)&&(a=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=d&&((i=r<2&&d<o[1])?(s=0,p.v=n,p.n=o[1]):d<m&&(i=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,p.n=m,s=0))}if(i||r>1)return l;throw v=!0,n}return function(i,u,m){if(c>1)throw TypeError("Generator is already running");for(v&&1===u&&d(u,m),s=u,a=m;(t=s<2?e:a)||!v;){o||(s?s<3?(s>1&&(p.n=-1),d(s,a)):p.n=a:p.v=a);try{if(c=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(a=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(v=p.n<0)?a:r.call(n,p))!==l)break}catch(t){o=e,s=1,a=t}finally{c=1}}return{value:t,done:v}}}(r,o,s),!0),u}var l={};function c(){}function u(){}function v(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),d=v.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=v,i(d,"constructor",v),i(v,"constructor",u),u.displayName="GeneratorFunction",i(v,s,"GeneratorFunction"),i(d),i(d,s,"Generator"),i(d,o,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:a,m}})()}function i(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,r,n){function s(t,r){i(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(s("next",0),s("throw",1),s("return",2))},i(e,t,r,n)}function o(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}var s=new(r(571).A);const a={data:function(){return{avaiableRoles:[],loading:!1,list:[]}},created:function(){this.getRoles()},computed:{roles:function(){return this.$store.getters.roles},switchRoles:{get:function(){return this.roles[0]},set:function(e){var t=this,r=this.list.find(function(t){return t.name===e});this.$store.dispatch("user/changeRoles",r).then(function(){t.$emit("change")})}}},methods:{getRoles:function(){var e,t=this;return(e=n().m(function e(){var r,i;return n().w(function(e){for(;;)switch(e.n){case 0:return t.loading=!0,e.n=1,s.list({});case 1:r=e.v,i=r.data,t.list=i,t.list.forEach(function(e,r){e.index=r+1,e.description=t.$t("roles.description."+e.name)}),t.loading=!1;case 2:return e.a(2)}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){o(s,n,i,a,l,"next",e)}function l(e){o(s,n,i,a,l,"throw",e)}a(void 0)})})()}}},l=a;const c=(0,r(4486).A)(l,function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n    "+e._s(e.$t("permission.roles"))+": "+e._s(e.roles)+"\n  ")]),e._v(" "),t("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(e._s(e.$t("permission.switchRoles"))+": ")]),e._v(" "),t("div",[t("el-radio-group",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],model:{value:e.switchRoles,callback:function(t){e.switchRoles=t},expression:"switchRoles"}},[t("el-radio-button",{attrs:{label:"admin"}}),e._v(" "),t("el-radio-button",{attrs:{label:"manager"}}),e._v(" "),t("el-radio-button",{attrs:{label:"editor"}}),e._v(" "),t("el-radio-button",{attrs:{label:"user"}}),e._v(" "),t("el-radio-button",{attrs:{label:"visitor"}})],1)],1)])},[],!1,null,null,null).exports},571:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(5751);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function a(e,t,r){return t=c(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,t,["roles"])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,(i=[{key:"permissions",value:function(e){return(0,n.A)({url:"/"+this.uri+"/"+e+"/permissions",method:"get"})}},{key:"destroy",value:function(e){return(0,n.A)({url:"/"+this.uri+"/"+e,method:"delete"})}}])&&o(r.prototype,i),s&&o(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,s}(r(1527).A)},1527:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(5751);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uri=t},(t=[{key:"list",value:function(e){return(0,n.A)({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return(0,n.A)({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return(0,n.A)({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return(0,n.A)({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return(0,n.A)({url:"/"+this.uri+"/"+e,method:"delete"})}},{key:"active",value:function(e,t,r){return(0,n.A)({url:"/"+this.uri+"/active/"+r,method:"post",data:{status:t}})}},{key:"select",value:function(e){return(0,n.A)({url:"/"+this.uri+"/select",method:"get",params:e})}},{key:"selectByType",value:function(e){return(0,n.A)({url:"/"+this.uri+"/select/"+e,method:"get"})}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},1739:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var n=r(9884),i=r(5304),o=r(9919),s=r(6882);const a={name:"DirectivePermission",components:{SwitchRoles:r(390).A},directives:{permission:n.A,role:i.A},data:function(){return{key:1}},methods:{checkPermission:o.A,checkRole:function(e){if(e&&e instanceof Array&&e.length>0){var t=s.A.getters&&s.A.getters.roles,r=e,n=t.some(function(e){return r.includes(e)});return n}return console.error("Need roles! Like v-role=\"['admin','editor']\""),!1},handleRolesChange:function(){this.key++}}},l=a;var c=r(5072),u=r.n(c),v=r(152),p={insert:"head",singleton:!1};u()(v.A,p);v.A.locals;const d=(0,r(4486).A)(l,function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"description"},[e._v("Laravue provides two directives "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("v-role")]),e._v(" and "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("v-permission")]),e._v(". Please see the belw example here for details")],1),e._v(" "),t("switch-roles",{on:{change:e.handleRolesChange}}),e._v(" "),t("div",{key:e.key,staticStyle:{"margin-top":"30px"}},[t("div",[t("span",{directives:[{name:"role",rawName:"v-role",value:["admin"],expression:"['admin']"}],staticClass:"permission-alert"},[e._v("\n        Only\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("admin")]),e._v(" can see this\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"role",rawName:"v-role",value:["admin"],expression:"['admin']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-role=\"['admin']\"")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"role",rawName:"v-role",value:["manager"],expression:"['manager']"}],staticClass:"permission-alert"},[e._v("\n        Only\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("manager")]),e._v(" can see this\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"role",rawName:"v-role",value:["manager"],expression:"['manager']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-role=\"['manager']\"")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"role",rawName:"v-role",value:["editor"],expression:"['editor']"}],staticClass:"permission-alert"},[e._v("\n        Only\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("editor")]),e._v(" can see this\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"role",rawName:"v-role",value:["editor"],expression:"['editor']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-role=\"['editor']\"")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"role",rawName:"v-role",value:["user"],expression:"['user']"}],staticClass:"permission-alert"},[e._v("\n        Only\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("user")]),e._v(" can see this\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"role",rawName:"v-role",value:["user"],expression:"['user']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-role=\"['user']\"")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"role",rawName:"v-role",value:["visitor"],expression:"['visitor']"}],staticClass:"permission-alert"},[e._v("\n        Only\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("visitor")]),e._v(" can see this\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"role",rawName:"v-role",value:["visitor"],expression:"['visitor']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-role=\"['visitor']\"")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"role",rawName:"v-role",value:["admin","editor"],expression:"['admin','editor']"}],staticClass:"permission-alert"},[e._v("\n        Both\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("admin")]),e._v(" and\n        "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("editor")]),e._v(" can see this\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"role",rawName:"v-role",value:["admin","editor"],expression:"['admin','editor']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-role=\"['admin','editor']\"")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"permission",rawName:"v-permission",value:["manage user"],expression:"['manage user']"}],staticClass:"permission-alert"},[e._v("\n        You can see this if you have "),t("el-tag",{staticClass:"permission-tag",attrs:{size:"small"}},[e._v("manage user")]),e._v(" permission\n      ")],1),e._v(" "),t("el-tag",{directives:[{name:"permission",rawName:"v-permission",value:["manage user"],expression:"['manage user']"}],staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-permission=\"['manage user']\"")])],1)]),e._v(" "),t("div",{key:"checkPermission"+e.key,staticStyle:{"margin-top":"60px"}},[t("code",[e._v("\n      "+e._s(e.$t("permission.tips"))+"\n      "),t("br"),e._v(" e.g.\n    ")]),e._v(" "),t("el-tabs",{staticStyle:{width:"550px"},attrs:{type:"border-card"}},[e.checkRole(["admin"])?t("el-tab-pane",{attrs:{label:"Admin"}},[e._v("\n        Admin can see this\n        "),t("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-if=\"checkRole(['admin'])\"")])],1):e._e(),e._v(" "),e.checkRole(["manager"])?t("el-tab-pane",{attrs:{label:"Manager"}},[e._v("\n        Manager can see this\n        "),t("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-if=\"checkRole(['manager'])\"")])],1):e._e(),e._v(" "),e.checkRole(["editor"])?t("el-tab-pane",{attrs:{label:"Editor"}},[e._v("\n        Editor can see this\n        "),t("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-if=\"checkRole(['editor'])\"")])],1):e._e(),e._v(" "),e.checkRole(["user"])?t("el-tab-pane",{attrs:{label:"User"}},[e._v("\n        User can see this\n        "),t("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-if=\"checkRole(['user'])\"")])],1):e._e(),e._v(" "),e.checkRole(["visitor"])?t("el-tab-pane",{attrs:{label:"Visitor"}},[e._v("\n        Visitor can see this\n        "),t("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-if=\"checkRole(['visitor'])\"")])],1):e._e(),e._v(" "),e.checkRole(["admin","editor"])?t("el-tab-pane",{attrs:{label:"Admin-OR-Editor"}},[e._v("\n        Both admin or editor can see this\n        "),t("el-tag",{staticClass:"permission-sourceCode",attrs:{type:"info"}},[e._v("v-if=\"checkRole(['admin','editor'])\"")])],1):e._e()],1)],1)],1)},[],!1,null,"1c865a73",null).exports},5304:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(6882);const i={inserted:function(e,t,r){var i=t.value,o=n.A.getters&&n.A.getters.roles;if(!(i&&i instanceof Array&&i.length>0))throw new Error("Roles are required! Example: v-role=\"['admin','editor']\"");var s=i,a=o.some(function(e){return s.includes(e)});a||e.parentNode&&e.parentNode.removeChild(e)}};var o=function(e){e.directive("role",i)};window.Vue&&(window.role=i,Vue.use(o)),i.install=o;const s=i},9884:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(6882);const i={inserted:function(e,t,r){var i=t.value,o=n.A.getters&&n.A.getters.permissions;if(!(i&&i instanceof Array&&i.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var s=i,a=o.some(function(e){return s.includes(e)});a||e.parentNode&&e.parentNode.removeChild(e)}};var o=function(e){e.directive("permission",i)};window.Vue&&(window.permission=i,Vue.use(o)),i.install=o;const s=i},9919:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(6882);function i(e){if(e&&e instanceof Array&&e.length>0){var t=n.A.getters&&n.A.getters.permissions,r=e;return t.some(function(e){return r.includes(e)})}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}}}]);