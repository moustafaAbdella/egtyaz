/*! For license information please see 394.js.LICENSE.txt */
"use strict";(self.webpackChunklaravue=self.webpackChunklaravue||[]).push([[394],{140:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(6798),o=n.n(i)()(function(t){return t[1]});o.push([t.id,".tinymce-container[data-v-4b676504]{line-height:normal;position:relative}.tinymce-container[data-v-4b676504] .mce-fullscreen{z-index:10000}.tinymce-textarea[data-v-4b676504]{visibility:hidden;z-index:-1}.editor-custom-btn-container[data-v-4b676504]{position:absolute;right:4px;top:4px}.fullscreen .editor-custom-btn-container[data-v-4b676504]{position:fixed;z-index:10000}.editor-upload-btn[data-v-4b676504]{display:inline-block}",""]);const a=o},1394:(t,e,n)=>{n.r(e),n.d(e,{default:()=>T});var i=n(5457),o=(n(9884),n(2215)),a=n.n(o);n(5751);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function l(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function c(t,e,n){return e=p(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(u=function(){return!!t})()}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var m=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,["admin/tickets"])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),n=e,i&&s(n.prototype,i),o&&s(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(n(1527).A),f=n(1783);function h(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,i,o,a){var l=i&&i.prototype instanceof s?i:s,c=Object.create(l.prototype);return v(c,"_invoke",function(n,i,o){var a,s,l,c=0,u=o||[],p=!1,d={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return a=e,s=0,l=t,d.n=n,r}};function m(n,i){for(s=n,l=i,e=0;!p&&c&&!o&&e<u.length;e++){var o,a=u[e],m=d.p,f=a[2];n>3?(o=f===i)&&(l=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=m&&((o=n<2&&m<a[1])?(s=0,d.v=i,d.n=a[1]):m<f&&(o=n<3||a[0]>i||i>f)&&(a[4]=n,a[5]=i,d.n=f,s=0))}if(o||n>1)return r;throw p=!0,i}return function(o,u,f){if(c>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,f),s=u,l=f;(e=s<2?t:l)||!p;){a||(s?s<3?(s>1&&(d.n=-1),m(s,l)):d.n=l:d.v=l);try{if(c=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(p=d.n<0)?l:n.call(i,d))!==r)break}catch(e){a=t,s=1,l=e}finally{c=1}}return{value:e,done:p}}}(n,o,a),!0),c}var r={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][i]?e(e([][i]())):(v(e={},i,function(){return this}),e),p=c.prototype=s.prototype=Object.create(u);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,v(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=c,v(p,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,o,"GeneratorFunction"),v(p),v(p,o,"Generator"),v(p,i,function(){return this}),v(p,"toString",function(){return"[object Generator]"}),(h=function(){return{w:a,m:d}})()}function v(t,e,n,i){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,i){function a(e,n){v(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},v(t,e,n,i)}function g(t,e,n,i,o,a,r){try{var s=t[a](r),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,o)}var y="Admin-Token";new m;const b={data:function(){return{tit:"Show Tickets",type:"tickets",ticket:{},newComment:{comment:"",attachments:[]},comments:[],taxData:[],search:{per_page:10,visible:!1},pagination:{total:0,per_page:10,page:1},setting:{},apiUrl:i.A.apiUrl+"admin/upload",listLoading:!1,formloading:!1,showform:!1}},components:{Tinymce:f.A},methods:{handleChange:function(t,e){this.newComment.attachments=e.slice(-3)},UpdateTicket:function(t){this.ticket=t,this.tit="Update Ticket No: "+t.id+"  >>> "+t.subject,this.getComments(t.id),this.showform=!0},htmlDecode:function(t){var e=document.createElement("textarea");return e.innerHTML=t,0===e.childNodes.length?"":e.childNodes[0].nodeValue},unescape:function(t){return this.htmlDecode(t)},AddComment:function(){var t=this,e=this;this.$confirm("Are you sure you want to answer ticket. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.listLoading=!0,fetch(i.A.apiUrl+"admin/tickets/"+e.ticket.id,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+a().get(y),"Content-Type":"application/json"},body:JSON.stringify({comment:e.newComment.comment,attachments:e.newComment.attachments,status:e.ticket.status,priority:e.ticket.priority})}).then(function(t){return t.json()}).then(function(t){e.$message.success("Answered Succefully"),e.getList(e.pagination.page)})}).catch(function(){t.$message({type:"info",message:"Update canceled"})})},DeleteTicket:function(t){var e=this,n=this;this.$confirm("This will permanently delete the tickets. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"danger"}).then(function(){n.listLoading=!0,fetch(i.A.apiUrl+"admin/tickets/"+t.id,{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer "+a().get(y),"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){0==t.res?n.$message.error("Unable to Delete Ticket"):(n.$message.success("Deleted Succefully"),n.getList(n.pagination.page))})}).catch(function(){e.$message({type:"info",message:"Delete canceled"})})},setStyle:function(t){return this.ticket.requester_id==t.author_id?" background:#fffdd9 ":" background:#f1f1f1 "},bytesToSize:function(t){if(0==t)return"0 Byte";var e=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,e),2)+" "+["Bytes","KB","MB","GB","TB"][e]},openFile:function(t){window.open(t.content_url,"_blank")},getComments:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.formLoading=!0;var n=this;fetch(i.A.apiUrl+"admin/tickets/"+t,{method:"get",headers:{Accept:"application/json",Authorization:"Bearer "+a().get(y),"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){n.comments=t.comments.comments,!0===e&&(n.ticket=t.ticket.ticket),n.formLoading=!1})},ActiveTicket:function(t,e){var n=this,o=this;this.$confirm("This will Update Ticket Status. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){o.listLoading=!0,fetch(i.A.apiUrl+"admin/tickets/active/"+t.id,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+a().get(y),"Content-Type":"application/json"},body:JSON.stringify({status:e})}).then(function(t){return t.json()}).then(function(t){0==t.res?o.$message.error("Unable to Update Ticket"):(o.$message.success("Updated Succefully"),o.getList(o.pagination.page))})}).catch(function(){n.$message({type:"info",message:"Update canceled"})})},handleAvatarSuccess:function(t,e){this.photo=e.response},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image.gif"===t.type,n=t.size/1024/1024<10;return e||this.$message.error("Avatar picture must be JPG format!"),n||this.$message.error("Avatar picture size can not exceed 2MB!"),e&&n},TicketSearch:function(t){t?(this.$message.info("Please Wait Until Search"),this.getList(1,!0,!0)):(this.search.s="",this.search.status=""),this.search.visible=!1},gotoPage:function(t){this.getList(t,!0,!1)},getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this;this.listLoading=!0;var r=i.A.apiUrl+"admin/tickets/?page="+t+"&per_page="+o.search.per_page;fetch(r,{method:"get",headers:new Headers({Authorization:"Bearer "+a().get(y)})}).then(function(t){return t.json()}).then(function(t){o.taxData=t.data,o.pagination.total=t.total,o.pagination.per_page=t.per_page,o.pagination.current_page=t.current_page,e&&n&&o.$message.success("We Found "+t.total+" Result"),o.listLoading=!1})}},mounted:function(){var t,e=this;return(t=h().m(function t(){return h().w(function(t){for(;;)switch(t.n){case 0:e.$route.query.hasOwnProperty("id")?(e.showform=!0,e.getComments(e.$route.query.id,!0)):e.getList(1);case 1:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function r(t){g(a,i,o,r,s,"next",t)}function s(t){g(a,i,o,r,s,"throw",t)}r(void 0)})})()}},w=b;var _=n(5072),k=n.n(_),C=n(2651),x={insert:"head",singleton:!1};k()(C.A,x);C.A.locals;const T=(0,n(4486).A)(w,function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container",attrs:{id:"Ticket"}},[e("h1",{staticClass:"title"}),t._v(" "),e("el-container",[e("el-header",[e("h3",[t._v(" "+t._s(t.tit)+"     \n                    "),t.showform?t._e():e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" search"],expression:"['manage '+ptype+' search']"}],staticClass:"el-left",attrs:{type:"primary"},on:{click:function(e){t.search.visible=!0}}},[e("i",{staticClass:"el-icon-search"}),t._v(" Settings ")]),t._v(" "),t.showform?e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" search"],expression:"['manage '+ptype+' search']"}],staticClass:"el-left",attrs:{type:"primary"},on:{click:function(e){t.showform=!1,t.gotoPage(1)}}},[e("i",{staticClass:"el-icon-search"}),t._v(" List Tickets ")]):t._e()],1),t._v(" "),e("hr")]),t._v(" "),e("el-main",{attrs:{height:""}},[e("el-row",[e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.showform,expression:"showform"},{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" add"],expression:"['manage '+ptype+' add']"}],attrs:{span:24}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.formloading,expression:"formloading"}],attrs:{"label-position":"top","label-width":"150px"}},[e("el-row",[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"Title"}},[e("el-input",{attrs:{readonly:"",type:"text"},model:{value:t.ticket.subject,callback:function(e){t.$set(t.ticket,"subject",e)},expression:"ticket.subject"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:1}}),t._v(" "),e("el-col",{attrs:{span:7}},[e("el-form-item",{attrs:{label:"Status"}},[e("el-select",{attrs:{"value-key":"status"},model:{value:t.ticket.status,callback:function(e){t.$set(t.ticket,"status",e)},expression:"ticket.status"}},[e("el-option",{attrs:{value:"opened",label:"Opened"}}),t._v(" "),e("el-option",{attrs:{value:"pending",label:"Pending"}}),t._v(" "),e("el-option",{attrs:{value:"solved",label:"Solved"}})],1)],1)],1),t._v(" "),e("el-col",{attrs:{span:1}},[t._v(" Â  ")]),t._v(" "),e("el-col",{attrs:{span:7}},[e("el-form-item",{attrs:{label:"Priority"}},[e("el-select",{attrs:{"value-key":"priority"},model:{value:t.ticket.priority,callback:function(e){t.$set(t.ticket,"priority",e)},expression:"ticket.priority"}},[e("el-option",{attrs:{value:"low",label:"Low"}}),t._v(" "),e("el-option",{attrs:{value:"normal",label:"Normal"}}),t._v(" "),e("el-option",{attrs:{value:"high",label:"High"}}),t._v(" "),e("el-option",{attrs:{value:"urgent",label:"Urgent"}})],1)],1)],1),t._v(" "),t._l(t.comments,function(n){return e("el-col",{key:n.id,attrs:{span:24}},[e("el-card",{staticClass:"box-card",style:t.setStyle(n)},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(n.created_at))]),t._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v("Operation button")])],1),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.unescape(n.html_body))}}),t._v(" "),e("hr"),t._v(" "),t._l(n.attachments,function(n){return e("el-tag",{key:n.file_name,attrs:{type:t.info}},[t._v("\n                                                        "+t._s(n.file_name)+" \n                                                        "),e("el-badge",{staticClass:"item",attrs:{value:t.bytesToSize(n.size),type:"warning"}},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.openFile(n)}}},[e("i",{staticClass:"el-icon-download"})])],1)],1)})],2),t._v(" "),e("br")],1)}),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("Replay On Ticket")])]),t._v(" "),e("tinymce",{attrs:{height:300},model:{value:t.newComment.comment,callback:function(e){t.$set(t.newComment,"comment",e)},expression:"newComment.comment"}}),t._v(" "),e("hr"),t._v(" "),e("el-upload",{staticClass:"upload-demo",attrs:{action:t.apiUrl,"on-change":t.handleChange,"file-list":t.newComment.attachments}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("Upload Attachments")]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" Maxium size is 2 MB")])],1)],1)],1),t._v(" "),e("el-col",{attrs:{span:22}},[e("el-form-item",[e("br"),e("br"),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.AddComment}},[t._v(" Save ")])],1)],1)],2)],1)],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.showform,expression:"!showform"}],attrs:{span:24}},[e("el-dialog",{attrs:{title:"Settings",visible:t.search.visible},on:{"update:visible":function(e){return t.$set(t.search,"visible",e)}}},[e("el-form",{attrs:{"label-position":"top",model:t.search}},[e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"PerPage"}},[e("el-input-number",{model:{value:t.search.per_page,callback:function(e){t.$set(t.search,"per_page",e)},expression:"search.per_page"}})],1)],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.TicketSearch(!1)}}},[t._v("Cancel")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.TicketSearch(!0)}}},[t._v("Save")])],1)],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:t.taxData,"row-key":"id",border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{prop:"id",width:"50",label:"ID"}}),t._v(" "),e("el-table-column",{attrs:{prop:"subject",label:"Title"}}),t._v(" "),e("el-table-column",{attrs:{prop:"description",label:"Description"}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"Status"}}),t._v(" "),e("el-table-column",{attrs:{label:"Operations"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-tooltip",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" edit"],expression:"['manage '+ptype+' edit']"}],attrs:{content:"Show Ticket",placement:"top"}},[e("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.UpdateTicket(n.row)}}},[e("i",{staticClass:"el-icon-view"})])],1),t._v(" "),"solved"!=n.row.status?e("el-tooltip",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" status"],expression:"['manage '+ptype+' status']"}],attrs:{content:"mark as Solved",placement:"top"}},[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.ActiveTicket(n.row,"solved")}}},[e("i",{staticClass:"el-icon-check"})])],1):t._e(),t._v(" "),"open"!=n.row.status?e("el-tooltip",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" status"],expression:"['manage '+ptype+' status']"}],attrs:{content:"Re-open",placement:"top"}},[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.ActiveTicket(n.row,"open")}}},[e("i",{staticClass:"el-icon-error"})])],1):t._e(),t._v(" "),"pending"!=n.row.status?e("el-tooltip",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" status"],expression:"['manage '+ptype+' status']"}],attrs:{content:"mark as  Pending",placement:"top"}},[e("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(e){return t.ActiveTicket(n.row,"pending")}}},[e("i",{staticClass:"el-icon-help"})])],1):t._e(),t._v(" "),e("el-tooltip",{directives:[{name:"permission",rawName:"v-permission",value:["manage "+t.ptype+" delete"],expression:"['manage '+ptype+' delete']"}],attrs:{content:"Delete",placement:"top"}},[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.DeleteTicket(n.row)}}},[e("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),t._v(" "),e("el-pagination",{attrs:{background:"",layout:"pager",total:t.pagination.total,"page-size":t.pagination.per_page,"current-page":t.pagination.current_page,"hide-on-single-page":!0},on:{"current-change":t.gotoPage}})],1)],1)],1)],1)],1)},[],!1,null,null,null).exports},1527:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(5751);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e},(e=[{key:"list",value:function(t){return(0,i.A)({url:"/"+this.uri,method:"get",params:t})}},{key:"get",value:function(t){return(0,i.A)({url:"/"+this.uri+"/"+t,method:"get"})}},{key:"store",value:function(t){return(0,i.A)({url:"/"+this.uri,method:"post",data:t})}},{key:"update",value:function(t,e){return(0,i.A)({url:"/"+this.uri+"/"+t,method:"put",data:e})}},{key:"destroy",value:function(t){return(0,i.A)({url:"/"+this.uri+"/"+t,method:"delete"})}},{key:"active",value:function(t,e,n){return(0,i.A)({url:"/"+this.uri+"/active/"+n,method:"post",data:{status:e}})}},{key:"select",value:function(t){return(0,i.A)({url:"/"+this.uri+"/select",method:"get",params:t})}},{key:"selectByType",value:function(t){return(0,i.A)({url:"/"+this.uri+"/select/"+t,method:"get"})}}])&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},1538:(t,e,n)=>{n.d(e,{A:()=>c});var i=n(5457);const o={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{apiUrl:i.A.apiUrl+"admin/upload?return=object",dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully or there is a network problem, please refresh the page and re-upload!")},handleSuccess:function(t,e){for(var n=e.uid,i=Object.keys(this.listObj),o=0,a=i.length;o<a;o++)if(this.listObj[i[o]].uid===n)return this.listObj[i[o]].url=t.files.file,void(this.listObj[i[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=Object.keys(this.listObj),i=0,o=n.length;i<o;i++)if(this.listObj[n[i]].uid===e)return void delete this.listObj[n[i]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise(function(o,a){var r=new Image;r.src=n.createObjectURL(t),r.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)})}}};var a=n(5072),r=n.n(a),s=n(5514),l={insert:"head",singleton:!1};r()(s.A,l);s.A.locals;const c=(0,n(4486).A)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-container"},[e("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n    Upload Image\n  ")]),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:t.apiUrl,"list-type":"picture-card"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("Click here to upload")])],1),t._v(" "),e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("Confirm")])],1)],1)},[],!1,null,"ca85efd8",null).exports},1783:(t,e,n)=>{n.d(e,{A:()=>p});var i=n(1538),o=n(1795);const a=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],r={name:"Tinymce",components:{editorImage:i.A},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:a,menubar:this.menubar,plugins:o.A,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],convert_urls:!1,default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",n.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))})}}};var s=n(5072),l=n.n(s),c=n(140),u={insert:"head",singleton:!1};l()(c.A,u);c.A.locals;const p=(0,n(4486).A)(r,function(){var t=this,e=t._self._c;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:t.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},[],!1,null,"4b676504",null).exports},1795:(t,e,n)=>{n.d(e,{A:()=>i});const i=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount mathslate"]},2651:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(6798),o=n.n(i)()(function(t){return t[1]});o.push([t.id,".el-left{float:right}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;overflow:hidden;position:relative}.avatar-uploader .el-upload:hover{border-color:#409eff}.avatar-uploader-icon{color:#8c939d;font-size:28px;height:178px;line-height:178px;text-align:center;width:178px}.avatar{display:block;height:178px;width:178px}table .el-button+.el-button{margin-left:0!important}",""]);const a=o},5514:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(6798),o=n.n(i)()(function(t){return t[1]});o.push([t.id,".editor-slide-upload[data-v-ca85efd8]{margin-bottom:20px}.editor-slide-upload[data-v-ca85efd8] .el-upload--picture-card{width:100%}",""]);const a=o},9884:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(6882);const o={inserted:function(t,e,n){var o=e.value,a=i.A.getters&&i.A.getters.permissions;if(!(o&&o instanceof Array&&o.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var r=o,s=a.some(function(t){return r.includes(t)});s||t.parentNode&&t.parentNode.removeChild(t)}};var a=function(t){t.directive("permission",o)};window.Vue&&(window.permission=o,Vue.use(a)),o.install=a;const r=o}}]);