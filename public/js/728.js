/*! For license information please see 728.js.LICENSE.txt */
"use strict";(self.webpackChunklaravue=self.webpackChunklaravue||[]).push([[728],{1428:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(5751);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,t,["users"])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,(i=[{key:"permissions",value:function(e){return(0,r.A)({url:"/"+this.uri+"/"+e+"/permissions",method:"get"})}},{key:"updatePermission",value:function(e,t){return(0,r.A)({url:"/"+this.uri+"/"+e+"/permissions",method:"put",data:t})}},{key:"DoVerify",value:function(e,t,n){return(0,r.A)({url:"/"+this.uri+"/verifiy/"+e,method:"post",data:{field:t,status:n}})}},{key:"updateArea",value:function(e,t){return(0,r.A)({url:"/"+this.uri+"/area/"+e,method:"post",data:{area:t}})}}])&&s(n.prototype,i),o&&s(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(n(1527).A)},1527:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(5751);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uri=t},(t=[{key:"list",value:function(e){return(0,r.A)({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return(0,r.A)({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return(0,r.A)({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return(0,r.A)({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return(0,r.A)({url:"/"+this.uri+"/"+e,method:"delete"})}},{key:"active",value:function(e,t,n){return(0,r.A)({url:"/"+this.uri+"/active/"+n,method:"post",data:{status:t}})}},{key:"select",value:function(e){return(0,r.A)({url:"/"+this.uri+"/select",method:"get",params:e})}},{key:"selectByType",value:function(e){return(0,r.A)({url:"/"+this.uri+"/select/"+e,method:"get"})}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},1582:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(6798),i=n.n(r)()(function(e){return e[1]});i.push([e.id,".pagination-container[data-v-68c28e9d]{background:#fff;padding:32px 16px}.pagination-container.hidden[data-v-68c28e9d]{display:none}",""]);const s=i},2030:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(6798),i=n.n(r)()(function(e){return e[1]});i.push([e.id,".edit-input[data-v-7df1c989]{padding-right:100px}.cancel-btn[data-v-7df1c989]{position:absolute;right:15px;top:10px}.dialog-footer[data-v-7df1c989]{margin-left:150px;padding-top:0;text-align:left}.app-container[data-v-7df1c989]{flex:1;font-size:14px;justify-content:space-between;padding-right:8px}.app-container .block[data-v-7df1c989]{float:left;min-width:250px}.app-container .clear-left[data-v-7df1c989]{clear:left}",""]);const s=i},3158:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(6798),i=n.n(r)()(function(e){return e[1]});i.push([e.id,".waves-ripple{background-clip:padding-box;background-color:rgba(0,0,0,.15);border-radius:100%;opacity:1;pointer-events:none;position:absolute;transform:scale(0);-webkit-user-select:none;-moz-user-select:none;user-select:none}.waves-ripple.z-active{opacity:0;transform:scale(2);transition:opacity 1.2s ease-out,transform .6s ease-out}",""]);const s=i},4725:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(5072),i=n.n(r),s=n(3158),o={insert:"head",singleton:!1};i()(s.A,o);s.A.locals;var a="@@wavesContext";function l(e,t){function n(n){var r=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),s=i.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var o=s.getBoundingClientRect(),a=s.querySelector(".waves-ripple");if(a?a.className="waves-ripple":((a=document.createElement("span")).className="waves-ripple",a.style.height=a.style.width=Math.max(o.width,o.height)+"px",s.appendChild(a)),"center"===i.type)a.style.top=o.height/2-a.offsetHeight/2+"px",a.style.left=o.width/2-a.offsetWidth/2+"px";else a.style.top=(n.pageY-o.top-a.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",a.style.left=(n.pageX-o.left-a.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px";return a.style.backgroundColor=i.color,a.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=n:e[a]={removeHandle:n},n}const u={bind:function(e,t){e.addEventListener("click",l(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",l(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}};var c=function(e){e.directive("waves",u)};window.Vue&&(window.waves=u,Vue.use(c)),u.install=c;const d=u},5304:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(6882);const i={inserted:function(e,t,n){var i=t.value,s=r.A.getters&&r.A.getters.roles;if(!(i&&i instanceof Array&&i.length>0))throw new Error("Roles are required! Example: v-role=\"['admin','editor']\"");var o=i,a=s.some(function(e){return o.includes(e)});a||e.parentNode&&e.parentNode.removeChild(e)}};var s=function(e){e.directive("role",i)};window.Vue&&(window.role=i,Vue.use(s)),i.install=s;const o=i},6030:(e,t,n)=>{n.d(t,{A:()=>c});Math.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function i(e,t,n){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,s=e-i,o=0;t=void 0===t?500:t;var a=function(){o+=20;var e,l=Math.easeInOutQuad(o,i,s,t);e=l,document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e,o<t?r(a):n&&"function"==typeof n&&n()};a()}const s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,15,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&i(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&i(0,800)}}};var o=n(5072),a=n.n(o),l=n(1582),u={insert:"head",singleton:!1};a()(l.A,u);l.A.locals;const c=(0,n(4486).A)(s,function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},[],!1,null,"68c28e9d",null).exports},9728:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(6030),i=n(1428),s=n(1527),o=n(4725),a=(n(9884),n(5304)),l=n(9919),u=n(6882);function c(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,i,s){var l=r&&r.prototype instanceof a?r:a,u=Object.create(l.prototype);return d(u,"_invoke",function(n,r,i){var s,a,l,u=0,c=i||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return s=t,a=0,l=e,m.n=n,o}};function p(n,r){for(a=n,l=r,t=0;!d&&u&&!i&&t<c.length;t++){var i,s=c[t],p=m.p,f=s[2];n>3?(i=f===r)&&(l=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=e):s[0]<=p&&((i=n<2&&p<s[1])?(a=0,m.v=r,m.n=s[1]):p<f&&(i=n<3||s[0]>r||r>f)&&(s[4]=n,s[5]=r,m.n=f,a=0))}if(i||n>1)return o;throw d=!0,r}return function(i,c,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,f),a=c,l=f;(t=a<2?e:l)||!d;){s||(a?a<3?(a>1&&(m.n=-1),p(a,l)):m.n=l:m.v=l);try{if(u=2,s){if(a||(i="next"),t=s[i]){if(!(t=t.call(s,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=s.return)&&t.call(s),a<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),a=1);s=e}else if((t=(d=m.n<0)?l:n.call(r,m))!==o)break}catch(t){s=e,a=1,l=t}finally{u=1}}return{value:t,done:d}}}(n,i,s),!0),u}var o={};function a(){}function l(){}function u(){}t=Object.getPrototypeOf;var m=[][r]?t(t([][r]())):(d(t={},r,function(){return this}),t),p=u.prototype=a.prototype=Object.create(m);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,d(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=u,d(p,"constructor",u),d(u,"constructor",l),l.displayName="GeneratorFunction",d(u,i,"GeneratorFunction"),d(p),d(p,i,"Generator"),d(p,r,function(){return this}),d(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:s,m:f}})()}function d(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}d=function(e,t,n,r){function s(t,n){d(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(s("next",0),s("throw",1),s("return",2))},d(e,t,n,r)}function m(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(e){m(s,r,i,o,a,"next",e)}function a(e){m(s,r,i,o,a,"throw",e)}o(void 0)})}}var f=new i.A,h=new s.A("permissions");const v={name:"UserList",components:{Pagination:r.A},directives:{waves:o.A,role:a.A},data:function(){var e=this;return{list:null,total:0,loading:!0,downloading:!1,userCreating:!1,query:{page:1,limit:15,keyword:"",role:""},roles:["admin","manager","editor","support","teacher"],nonAdminRoles:["manager","editor","support","teacher"],newUser:{},dialogFormVisible:!1,dialogPermissionVisible:!1,dialogPermissionLoading:!1,currentUserId:0,currentUser:{name:"",permissions:[],rolePermissions:[]},rules:{roles:[{required:!0,message:"Role is required",trigger:"change"}],name:[{required:!0,message:"Name is required",trigger:"blur"}],email:[{required:!0,message:"Email is required",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}],password:[{required:!0,message:"Password is required",trigger:"blur"}],confirmPassword:[{validator:function(t,n,r){n!==e.newUser.password?r(new Error("Password is mismatched!")):r()},trigger:"blur"}]},permissionProps:{children:"children",label:"name",disabled:"disabled"},permissions:[],menuPermissions:[],otherPermissions:[]}},computed:{normalizedMenuPermissions:function(){var e=this,t=[];this.currentUser.permissions.role.forEach(function(e){t.push({id:e.id,name:e.name,disabled:!0})});var n={id:-1,name:"Inherited from role",disabled:!0,children:this.classifyPermissions(t).menu};return console.log(this.menuPermissions),t=this.menuPermissions.filter(function(t){return!e.currentUser.permissions.role.find(function(e){return e.id===t.id})}),[n,{id:0,name:"Extra menus",children:t,disabled:0===t.length}]},normalizedOtherPermissions:function(){var e=this,t=[];this.currentUser.permissions.role.forEach(function(e){t.push({id:e.id,name:e.name,disabled:!0})});var n={id:-1,name:"Inherited from role",disabled:!0,children:this.classifyPermissions(t).other};return t=this.otherPermissions.filter(function(t){return!e.currentUser.permissions.role.find(function(e){return e.id===t.id})}),[n,{id:0,name:"Extra permissions",children:t,disabled:0===t.length}]},userMenuPermissions:function(){return this.classifyPermissions(this.userPermissions).menu},userOtherPermissions:function(){return this.classifyPermissions(this.userPermissions).other},userPermissions:function(){return this.currentUser.permissions.role.concat(this.currentUser.permissions.user)}},created:function(){this.resetNewUser(),this.getList(),(0,l.A)(["manage premissions edit"])&&this.getPermissions();var e=u.A.getters&&u.A.getters.roles;"admin"==e[0]&&(this.roles=["editor","teacher","support","manager","admin"],this.nonAdminRoles=["editor","teacher","support","manager","admin"]),"manager"==e[0]?(this.roles=["editor","teacher","support"],this.nonAdminRoles=["editor","teacher","support"]):"editor"==e[0]?(this.roles=["editor"],this.nonAdminRoles=["editor"]):"support"==e[0]?(this.roles=["support","teacher"],this.nonAdminRoles=["support","teacher"]):"teacher"==e[0]&&(this.roles=["teacher"],this.nonAdminRoles=["teacher"])},methods:{checkPermission:l.A,getPermissions:function(){var e=this;return p(c().m(function t(){var n,r,i,s,o,a;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,h.list({});case 1:n=t.v,r=n.data,i=e.classifyPermissions(r),s=i.all,o=i.menu,a=i.other,e.permissions=s,e.menuPermissions=o,e.otherPermissions=a;case 2:return t.a(2)}},t)}))()},getList:function(){var e=this;return p(c().m(function t(){var n,r,i,s,o,a;return c().w(function(t){for(;;)switch(t.n){case 0:return n=e.query,r=n.limit,i=n.page,e.loading=!0,t.n=1,f.list(e.query);case 1:s=t.v,o=s.data,a=s.meta,e.list=o,e.list.forEach(function(e,t){e.index=(i-1)*r+t+1}),e.total=a.total,e.loading=!1;case 2:return t.a(2)}},t)}))()},handleFilter:function(){this.query.page=1,this.getList()},handleCreate:function(){var e=this;this.resetNewUser(),this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.userForm.clearValidate()})},handleDelete:function(e,t){var n=this;this.$confirm("This will permanently delete user "+t+". Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){f.destroy(e).then(function(e){n.$message({type:"success",message:"Delete completed"}),n.handleFilter()}).catch(function(e){console.log(e)})}).catch(function(){n.$message({type:"info",message:"Delete canceled"})})},handleEditPermissions:function(e){var t=this;return p(c().m(function n(){var r,i,s;return c().w(function(n){for(;;)switch(n.n){case 0:return t.currentUserId=e,t.dialogPermissionLoading=!0,t.dialogPermissionVisible=!0,r=t.list.find(function(t){return t.id===e}),n.n=1,f.permissions(e);case 1:i=n.v,s=i.data,t.currentUser={id:r.id,name:r.name,permissions:s},t.dialogPermissionLoading=!1,t.$nextTick(function(){t.$refs.menuPermissions.setCheckedKeys(t.permissionKeys(t.userMenuPermissions)),t.$refs.otherPermissions.setCheckedKeys(t.permissionKeys(t.userOtherPermissions))});case 2:return n.a(2)}},n)}))()},createUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.newUser.roles=[e.newUser.role],e.userCreating=!0,f.store(e.newUser).then(function(t){e.$message({message:"New user "+e.newUser.name+"("+e.newUser.email+") has been created successfully.",type:"success",duration:5e3}),e.resetNewUser(),e.dialogFormVisible=!1,e.handleFilter()}).catch(function(e){console.log(e)}).finally(function(){e.userCreating=!1})})},resetNewUser:function(){this.newUser={name:"",email:"",password:"",confirmPassword:"",roles:[]}},handleDownload:function(){var e=this;this.downloading=!0,Promise.all([n.e(660),n.e(93)]).then(n.bind(n,727)).then(function(t){var n=e.formatJson(["index","id","name","email","role"],e.list);t.export_json_to_excel({header:["id","user_id","name","email","role"],data:n,filename:"user-list"}),e.downloading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},permissionKeys:function(e){return e.map(function(e){return e.id})},classifyPermissions:function(e){var t=this,n=[],r=[],i=[];return e.forEach(function(e){var s=e.name;n.push(e),s.startsWith("view menu")?r.push(t.normalizeMenuPermission(e)):i.push(t.normalizePermission(e))}),{all:n,menu:r,other:i}},normalizeMenuPermission:function(e){return{id:e.id,name:this.$options.filters.uppercaseFirst(e.name.substring(10)),disabled:e.disabled||!1}},normalizePermission:function(e){var t=e.disabled||"manage permission"===e.name;return{id:e.id,name:this.$options.filters.uppercaseFirst(e.name),disabled:t}},confirmPermission:function(){var e=this,t=this.$refs.menuPermissions.getCheckedKeys(),n=this.$refs.otherPermissions.getCheckedKeys(),r=t.concat(n);this.dialogPermissionLoading=!0,f.updatePermission(this.currentUserId,{permissions:r}).then(function(t){e.$message({message:"Permissions has been updated successfully",type:"success",duration:5e3}),e.dialogPermissionLoading=!1,e.dialogPermissionVisible=!1})}}},g=v;var y=n(5072),b=n.n(y),w=n(2030),P={insert:"head",singleton:!1};b()(w.A,P);w.A.locals;const k=(0,n(4486).A)(g,function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-input",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin search"],expression:"['manage admin search']"}],staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("table.keyword")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),e._v(" "),t("el-select",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin search"],expression:"['manage admin search']"}],staticClass:"filter-item",staticStyle:{width:"90px"},attrs:{placeholder:e.$t("table.role"),clearable:""},on:{change:e.handleFilter},model:{value:e.query.role,callback:function(t){e.$set(e.query,"role",t)},expression:"query.role"}},e._l(e.roles,function(n){return t("el-option",{key:n,attrs:{label:e._f("uppercaseFirst")(n),value:n}})}),1),e._v(" "),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin search"],expression:"['manage admin search']"},{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n      "+e._s(e.$t("table.search"))+"\n    ")]),e._v(" "),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin add"],expression:"['manage admin add']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("\n      "+e._s(e.$t("table.add"))+"\n    ")]),e._v(" "),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin export"],expression:"['manage admin export']"},{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.downloading,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("\n      "+e._s(e.$t("table.export"))+"\n    ")])],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.index))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.name))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"Email"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.email))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"Role",width:"120"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.roles.join(", ")))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"Actions",width:"350"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.roles.includes("admin")?t("router-link",{attrs:{to:"/users/admin/edit/"+n.row.id}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin edit"],expression:"['manage admin edit']"}],attrs:{type:"primary",size:"small",icon:"el-icon-edit"}},[e._v("\n            Edit\n          ")])],1):e._e(),e._v(" "),n.row.roles.includes("admin")?t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin premission"],expression:"['manage admin premission']"},{name:"role",rawName:"v-role",value:["admin","manager"],expression:"['admin','manager']"}],attrs:{type:"warning",size:"small",icon:"el-icon-edit"},on:{click:function(t){return e.handleEditPermissions(n.row.id)}}},[e._v("\n          Permissions\n        ")]):e._e(),e._v(" "),n.row.roles.includes("admin")?t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["manage admin delete"],expression:"['manage admin delete']"}],attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(n.row.id,n.row.name)}}},[e._v("\n          Delete\n        ")]):e._e()]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.getList}}),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogPermissionVisible,title:"Edit Permissions - "+e.currentUser.name},on:{"update:visible":function(t){e.dialogPermissionVisible=t}}},[e.currentUser.name?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogPermissionLoading,expression:"dialogPermissionLoading"}],staticClass:"form-container"},[t("div",{staticClass:"permissions-container"},[t("div",{staticClass:"block"},[t("el-form",{attrs:{model:e.currentUser,"label-width":"80px","label-position":"top"}},[t("el-form-item",{attrs:{label:"Menus"}},[t("el-tree",{ref:"menuPermissions",staticClass:"permission-tree",attrs:{data:e.normalizedMenuPermissions,"default-checked-keys":e.permissionKeys(e.userMenuPermissions),props:e.permissionProps,"show-checkbox":"","node-key":"id"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"block"},[t("el-form",{attrs:{model:e.currentUser,"label-width":"80px","label-position":"top"}},[t("el-form-item",{attrs:{label:"Permissions"}},[t("el-tree",{ref:"otherPermissions",staticClass:"permission-tree",attrs:{data:e.normalizedOtherPermissions,"default-checked-keys":e.permissionKeys(e.userOtherPermissions),props:e.permissionProps,"show-checkbox":"","node-key":"id"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"clear-left"})]),e._v(" "),t("div",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogPermissionVisible=!1}}},[e._v("\n          "+e._s(e.$t("permission.cancel"))+"\n        ")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmPermission}},[e._v("\n          "+e._s(e.$t("permission.confirm"))+"\n        ")])],1)]):e._e()]),e._v(" "),t("el-dialog",{attrs:{title:"Create new user",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.userCreating,expression:"userCreating"}],staticClass:"form-container"},[t("el-form",{ref:"userForm",staticStyle:{"max-width":"500px"},attrs:{rules:e.rules,model:e.newUser,"label-position":"left","label-width":"150px"}},[t("el-form-item",{attrs:{label:e.$t("user.role"),prop:"roles"}},[t("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select role"},model:{value:e.newUser.roles,callback:function(t){e.$set(e.newUser,"roles",t)},expression:"newUser.roles"}},e._l(e.nonAdminRoles,function(n){return t("el-option",{key:n,attrs:{label:e._f("uppercaseFirst")(n),value:n}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("user.name"),prop:"name"}},[t("el-input",{model:{value:e.newUser.name,callback:function(t){e.$set(e.newUser,"name",t)},expression:"newUser.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("user.email"),prop:"email"}},[t("el-input",{model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("user.password"),prop:"password"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.newUser.password,callback:function(t){e.$set(e.newUser,"password",t)},expression:"newUser.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("user.confirmPassword"),prop:"confirmPassword"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.newUser.confirmPassword,callback:function(t){e.$set(e.newUser,"confirmPassword",t)},expression:"newUser.confirmPassword"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n          "+e._s(e.$t("table.cancel"))+"\n        ")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createUser()}}},[e._v("\n          "+e._s(e.$t("table.confirm"))+"\n        ")])],1)],1)])],1)},[],!1,null,"7df1c989",null).exports},9884:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(6882);const i={inserted:function(e,t,n){var i=t.value,s=r.A.getters&&r.A.getters.permissions;if(!(i&&i instanceof Array&&i.length>0))throw new Error("Permissions are required! Example: v-permission=\"['manage user','manage permission']\"");var o=i,a=s.some(function(e){return o.includes(e)});a||e.parentNode&&e.parentNode.removeChild(e)}};var s=function(e){e.directive("permission",i)};window.Vue&&(window.permission=i,Vue.use(s)),i.install=s;const o=i},9919:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(6882);function i(e){if(e&&e instanceof Array&&e.length>0){var t=r.A.getters&&r.A.getters.permissions,n=e;return t.some(function(e){return n.includes(e)})}return console.error("Need permissions! Like v-permission=\"['manage permission','edit article']\""),!1}}}]);